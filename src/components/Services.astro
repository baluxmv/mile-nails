---
interface Service {
  name: string;
  price: number;
  description: string;
  featured?: boolean;
  category?: string;
}

interface Props {
  services: Service[];
}

const { services } = Astro.props;

const formatPrice = (price: number) => {
  return price.toLocaleString('es-CL');
};

const getIcon = (name: string) => {
  if (name.toLowerCase().includes('pesta√±a')) {
    return `<path d="M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"/><path d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>`;
  }
  if (name.toLowerCase().includes('depila')) {
    return `<path d="M9.53 16.122a3 3 0 00-5.78 1.128 2.25 2.25 0 01-2.4 2.245 4.5 4.5 0 008.4-2.245c0-.399-.078-.78-.22-1.128zm0 0a15.998 15.998 0 003.388-1.62m-5.043-.025a15.994 15.994 0 011.622-3.395m3.42 3.42a15.995 15.995 0 004.764-4.648l3.876-5.814a1.151 1.151 0 00-1.597-1.597L14.146 6.32a15.996 15.996 0 00-4.649 4.763m3.42 3.42a6.776 6.776 0 00-3.42-3.42"/>`;
  }
  // Default nail icon
  return `<path d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09z"/>`;
};
---

<section class="section-padding bg-cream" id="servicios">
  <div class="container">
    <div class="text-center max-w-lg mx-auto mb-16">
      <p class="section-tag justify-center reveal">Servicios</p>
      <h2 class="reveal reveal-delay-1">Nuestros <em class="italic text-blush">Tratamientos</em></h2>
      <p class="text-text-light mt-4 reveal reveal-delay-2">Descubre todo lo que tenemos para ti</p>
    </div>

    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
      {services.map((service, index) => (
        <div
          class:list={[
            'service-card bg-white p-8 rounded-3xl text-center border border-transparent transition-all duration-400 hover:border-blush-light hover:-translate-y-2 hover:shadow-xl hover:shadow-blush/10 reveal',
            `reveal-delay-${Math.min(index + 1, 6)}`,
            { 'featured': service.featured }
          ]}
        >
          {service.featured && (
            <span class="absolute top-5 -right-8 text-[0.6rem] font-semibold tracking-[0.1em] uppercase py-1.5 px-10 bg-white text-blush-dark rotate-45">Popular</span>
          )}

          <div class:list={[
            'w-[70px] h-[70px] mx-auto mb-5 flex items-center justify-center rounded-full',
            service.featured ? 'bg-white/20' : 'bg-gradient-to-br from-cream-dark to-blush-glow'
          ]}>
            <svg class:list={['w-8 h-8', service.featured ? 'text-white' : 'text-blush-dark']} viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
              <Fragment set:html={getIcon(service.name)} />
            </svg>
          </div>

          <h3 class:list={['mb-2 text-xl', service.featured && 'text-white']}>{service.name}</h3>
          <p class:list={[
            'text-sm mb-5 min-h-[48px]',
            service.featured ? 'text-white/80' : 'text-text-light'
          ]}>{service.description}</p>

          <div class:list={[
            'font-display text-2xl font-medium',
            service.featured ? 'text-white' : 'text-blush-dark'
          ]}>
            ${formatPrice(service.price)} <small class:list={[
              'text-xs font-body',
              service.featured ? 'text-white/70' : 'text-text-light'
            ]}>CLP</small>
          </div>
        </div>
      ))}
    </div>
  </div>
</section>

<style>
  .service-card.featured {
    @apply bg-gradient-to-br from-blush to-blush-dark text-white relative overflow-hidden;
  }
</style>
